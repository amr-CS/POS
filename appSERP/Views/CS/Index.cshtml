<!-- CustomerSupplier -->
@model System.Data.DataTable
@using System.Data
@using appSERP.Views.Shared.appResource
@using appSERP.appCode.dbCode.ACC
@using appSERP.appCode.Setting.User
@{ DataTable vDtData = @Model;}
<!-- Header -->
<div >
    @Html.Action("ViewSettingHeader", "ViewSetting", new { pHeaderTitle = appResource._Customer })
</div>
<!-- Utlity -->
<div class="divUtilityBar d-flex ">
    @Html.Partial("~/Views/ViewSetting/ViewSettingUtilityBar.cshtml")
</div>

<!-- Data Container -->
<div  id="divContainer">
    <!-- DataTable -->
    <table class="table table-hover tblData" id="tblData">
        <!-- DataTable Header -->
        <thead>
            <tr>

                <th>@appResource._Customer</th>
                <th>@appResource._Customer</th>
                <th>@appResource._Area</th>
                <th>@appResource._Area</th>
                <th>@appResource.GroupId</th>
                <th>@appResource.GroupId</th>
                <th>@appResource._Account</th>
                <th>@appResource._Account</th>
                <th>@appResource._Address</th>
                <th>@appResource._Phone1</th>
                <th>@appResource._Phone2</th>
                <th>@appResource._Email</th>
                <th>@appResource.ContactPerson</th>
                <th>@appResource.SalesPurchasePerson</th>
                <th>@appResource.TaxNumber</th>
                <th>@appResource._CreditLimit</th>
                <th>@appResource.GracePeriodDays</th>
                <th>@appResource._IsCustomer</th>
                <th>@appResource._IsActive</th>
                <th class="thActions">@appResource._Actions</th>

            </tr>
        </thead> <!-- End of DataTable Header -->
        <!-- DataTable Body -->
        <tbody>
            @foreach (DataRow vDrwData in vDtData.Rows)
            {
            <tr data-active="@vDrwData["CSIsActive"]" data-id="@vDrwData["CSId"]">
                <!-- Data -->
           
                    <td title="@vDrwData["CSNameL1"]">@vDrwData["CSNameL1"]</td>
                    <td title="@vDrwData["CSNameL2"]">@vDrwData["CSNameL2"]</td>
                    <td title="@vDrwData["AreaNameL1"]">@vDrwData["AreaNameL1"]</td>
                    <td title="@vDrwData["AreaNameL2"]">@vDrwData["AreaNameL2"]</td>
                    <td title="@vDrwData["CSGroupNameL1"]">@vDrwData["CSGroupNameL1"]</td>
                    <td title="@vDrwData["CSGroupNameL2"]">@vDrwData["CSGroupNameL2"]</td>
                    <td title="@vDrwData["AccountNameL1"]">@vDrwData["AccountNameL1"]</td>
                    <td title="@vDrwData["AccountNameL2"]">@vDrwData["AccountNameL2"]</td>

              
                <td title="@vDrwData["CSAddress"]">@vDrwData["CSAddress"]</td>
                <td title="@vDrwData["CSPhone1"]">@vDrwData["CSPhone1"]</td>
                <td title="@vDrwData["CSPhone2"]">@vDrwData["CSPhone2"]</td>
                <td title="@vDrwData["CSEmail"]">@vDrwData["CSEmail"]</td>
                <td title="@vDrwData["CSContactPerson"]">@vDrwData["CSContactPerson"]</td>
                <td title="@vDrwData["CSSalesPurchasePerson"]">@vDrwData["CSSalesPurchasePerson"]</td>
                <td title="@vDrwData["CSTaxNumber"]">@vDrwData["CSTaxNumber"]</td>
                <td title="@vDrwData["CSCreditLimit"]">@vDrwData["CSCreditLimit"]</td>
                <td title="@vDrwData["CSGroupGracePeriodDays"]">@vDrwData["CSGroupGracePeriodDays"]</td>
                <td class="IsCustomer" title="@vDrwData["CSIsCustomer"]">@vDrwData["CSIsCustomer"]</td>

                <td class="dataIsActive"></td>
                <!-- Actions -->
                <td>
                    <!-- Edit -->
                    <button type="button" class="btn btnEdit" data-id="@vDrwData["CSId"]">
                        <i class="icoEdit"></i>
                    </button>
                    <!-- Delete -->
                    <button type="button" class="btn btnDelete" data-id="@vDrwData["CSId"]" data-name="@vDrwData["CSNameL1"]">
                        <i class="icoDelete"></i>
                    </button>
                </td> <!-- End of Actions Cell -->
            </tr>
            }
        </tbody><!-- End of DataTable Body -->
    </table> <!-- End of DataTable -->
</div> <!-- End of Data Container -->
<!-- Data Modal -->
<div id="dataModal" class="fade modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" id="dataModalContent"></div>
    </div>
</div>
<!-- Confirm Delete Modal -->
<div id="confirmDeleteModal" class="fade modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" id="confirmDeleteModalContent"></div>
    </div>
</div>
<!-- Script Create / Edit / Delete -->
<script>
    // Data Model URL
    var vDataURL = '/CS/DataModel/';
    // Data Model Elements [Create / Edit]
    var vDataModelElements = $('.btnCreate, .btnEdit,#btnAddNew');
    // Click Event
    vDataModelElements.on('click', function () {
        // Id
        var vDataId = $(this).attr('data-id');
        // Modal
        $('#dataModalContent').load(vDataURL + vDataId);
        // Modal Full
        $('#dataModalContent').parent().addClass('modal-dialog-full');
        // Check Modal Input
        funCheckModalInput();
        // Modal Show
        $('#dataModal').modal('show');
    });</script>
<script>
    $('.btnDelete').on('click', function () {
        // Id - NameAr - NameEn
        var vDataId = $(this).attr('data-id');
        var vDataName = $(this).attr('data-name');
        // URL
        var vDataURL = '/ViewSetting/ViewSettingConfirmDelete/';
        // Get HTML Content of [Confirm Delete] Partial View
        $.get(
            // URL
            vDataURL,
            // Parameters
            {
                id: vDataId,
                pName: vDataName,
            },
            // Function
            function (data, status) {
                // Modal
                $('#confirmDeleteModalContent').html(data);
                $('#confirmDeleteModal').modal('show');
                // Click Event [Delete Confirm]
                $("body").on("click", "#btnDeleteConfirm", function () {
                    // Delete Action URL
                    var vDeleteActionURL = '/CS/DataModel/';
                    // Delete
                    $.post(vDeleteActionURL, { id: vDataId, pIsDelete: true }, function () {
                        window.location.href = '/CS';
                    });
                });
            });
    }); // End of Click Event [Delete Button]</script>
<!-- Notification -->
<script src="~/Scripts/Notification/jquery.toast.js"></script>
<script src="~/Scripts/Notification/jsNotifications.js" type="text/javascript"></script>
<script>
    funNotification('@dbCustomerSupplier.vSQLResult', '@dbCustomerSupplier.vSQLResultTypeId');
    @{ dbCustomerSupplier.vSQLResult = string.Empty;}
    $('.btnPrint').on('click', function () {
        var url = '/CS/CSReport'
        var popupWindow = window.open(url);
    });
</script>
